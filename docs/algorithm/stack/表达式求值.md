# 表达式求值

## 描述
请写一个整数计算器，支持加减乘三种运算和括号。
输入：
(200-1）*(3-4)*5"


## 思路
即中缀表达式计算，一路读取"(200-1）*(3-4)*5"，先设置stack，读取到（进行递归，读取 2，0，0，给他组成一个数字，并且第一个数字标记+，放入stack[0],第二个数字放入stack[1] -1,读取到），递归返回stack里面数字的和，如果是乘法，直接从stack取一个计算后放回，直到遍历完 "(200-1）*(3-4)*5"
## 答案
``` java
import java.util.*;


public class Solution {
    /**
     * 代码中的类名、方法名、参数名已经指定，请勿修改，直接返回方法规定的值即可
     *
     * 返回表达式的值
     * @param s string字符串 待计算的表达式
     * @return int整型
     */
    public ArrayList<Integer> solve1(String str, int index) {
        Stack<Integer> stack = new Stack<Integer>();
        int num = 0;
        char operation = '+';
        int i;
        for (i = index; i < str.length(); i++) {
            if (str.charAt(i) >= '0' && str.charAt(i) <= '9') {
                num = num * 10 + str.charAt(i) - '0';
                if (i != str.length() - 1) {
                    continue;
                }
            }
            if (str.charAt(i) == '(') {
                ArrayList<Integer> tmp = solve1(str, i + 1);
                num = tmp.get(0);
                i = tmp.get(1);
                if (i != str.length() - 1) {
                    continue;
                }
            }
            switch (operation) {
                case'+':
                    stack.push(num);
                    break;
                case'-':
                    stack.push(-num);
                    break;
                case'*':
                    int tmp = stack.pop();
                    stack.push(tmp * num);
                    break;
            }
            num = 0;
            if(str.charAt(i)==')'){
break;
            }else {
                operation = str.charAt(i);

            }
        }

        int sum = 0;
        while(!stack.isEmpty()){
            sum+=stack.pop();


        }
               ArrayList<Integer> tmp = new ArrayList<Integer>();
            tmp.add(sum);
            tmp.add(i);


        return tmp;
    }
    public int solve (String s) {
      ArrayList<Integer> tmp = solve1(s,0);
        return tmp.get(0);
    }
}
```

## [题目网站](https://www.nowcoder.com/practice/c215ba61c8b1443b996351df929dc4d4?tpId=308&tqId=1076787&ru=%2Fpractice%2F885c1db3e39040cbae5cdf59fb0e9382&qru=%2Fta%2Falgorithm-start%2Fquestion-ranking&sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D308)
